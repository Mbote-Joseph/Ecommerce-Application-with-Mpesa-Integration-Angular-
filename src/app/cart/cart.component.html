<div class="container mt-4">
  <h3 class="mb-4">Your Cart ðŸ›’</h3>

  <!-- Empty Cart -->
  <div *ngIf="cart.length === 0" class="alert alert-info">
    Your cart is empty.
  </div>

  <!-- Populated Cart -->
  <div *ngIf="cart.length > 0">
    <div class="row g-3">
      <div *ngFor="let item of cart; let i = index" class="col-md-6">
        <div class="card shadow-sm h-100 d-flex flex-row align-items-center p-2">
          <img [src]="item.image" alt="{{ item.name }}" class="rounded me-3" width="80" height="80" style="object-fit: cover;" />
          <div class="flex-grow-1">
            <h6 class="mb-1">{{ item.name }}</h6>
            <p class="mb-1 text-muted">Ksh {{ item.price }} each</p>

            <div class="input-group input-group-sm w-75 mb-2">
              <button class="btn btn-outline-secondary" (click)="decreaseQuantity(i)">-</button>
              <input type="number" [(ngModel)]="cart[i].quantity" min="1" class="form-control text-center" />
              <button class="btn btn-outline-secondary" (click)="increaseQuantity(i)">+</button>
            </div>

            <button class="btn btn-sm btn-outline-danger" (click)="confirmRemove(i)">Remove</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Totals + Payment -->
    <div class="mt-4 border-top pt-3">
      <h5>Total: <strong>Ksh {{ getTotal() }}</strong></h5>
      <button class="btn btn-outline-secondary me-2" (click)="confirmClearCart()">Clear Cart</button>

      <div class="mt-3">
        <button class="btn btn-success mt-2" (click)="pay()">Pay with M-Pesa</button>
      </div>
    </div>
  </div>
</div>
